# config/solid_queue.yml
# Solid Queue configuration for background jobs and recurring tasks

production:
  dispatchers:
    - polling_interval: 1
      batch_size: 500
      concurrency_maintenance_interval: 600

  workers:
    - queues: default
      threads: 3
      polling_interval: 0.1
      processes: 2

  recurring:
    send_booking_reminders:
      class: SendBookingRemindersJob
      schedule: "0 9 * * *"  # Daily at 9 AM
      queue: default
      description: "Send reminder emails 2 days before bookings"

    check_waitlist_availability:
      class: CheckWaitlistAvailabilityJob
      schedule: "0 * * * *"  # Every hour
      queue: default
      description: "Check if waitlisted items are available and notify customers"

development:
  dispatchers:
    - polling_interval: 1
      batch_size: 500

  workers:
    - queues: default
      threads: 3
      polling_interval: 0.1

  # Recurring tasks also available in development for testing
  recurring:
    send_booking_reminders:
      class: SendBookingRemindersJob
      schedule: "0 9 * * *"
      queue: default

    check_waitlist_availability:
      class: CheckWaitlistAvailabilityJob
      schedule: "0 * * * *"
      queue: default

test:
  workers:
    - queues: default
      threads: 1
